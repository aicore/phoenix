<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## utils/EventManager

The global EventManager can be used to register named EventDispatchers so that events
can be triggered from anywhere without using require context. This should also be used to handle custom
`window.onmessage` handlers.

A global `window.EventManager` object is made available in phoenix that can be called anytime after AppStart.

## Usage

For Eg. Let's say we have an extension `drawImage` installed that wants to expose custom functionality to phoenix.
The Extension will first register named EventHandler like this:

```js
// in drawImage/someExtensionModule.js module within the extension, do the following:
const EventDispatcher = brackets.getModule("utils/EventDispatcher"),
EventManager = brackets.getModule("utils/EventManager");
EventDispatcher.makeEventDispatcher(exports);

EventManager.registerEventHandler("drawImage-Handler", exports);
```

Once the event handler is registered, we can trigger events on the named handler anywhere in phoenix
(inside or outside the extension) by using:

```js
EventManager.triggerEvent("drawImage-Handler", "someEventName", "param1", "param2", ...);
```

## registerEventHandler

Registers a named EventHandler. Event handlers are created using the call:
`EventDispatcher.makeEventDispatcher(Command.prototype);`

Type: [function][1]

### Parameters

*   `handlerName` **[string][2]** a unique name of the handler.
*   `eventDispatcher` **[object][3]** An EventDispatcher that will be used to trigger events.

### Examples

To register a close dialogue event handler in an extension:

```javascript
// in close-dialogue.js module winthin the extension, do the following:
const EventDispatcher = brackets.getModule("utils/EventDispatcher"),
EventDispatcher.makeEventDispatcher(exports);
const EventManager = brackets.getModule("utils/EventManager");

// Note: for event handler names, please change the <extensionName> to your extension name
// to prevent collisions. EventHandlers starting with `ph-` and `br-` are reserved as system handlers
// and not available for use in extensions.
EventManager.registerEventHandler("<extensionName>-closeDialogueHandler", exports);
// Once the event handler is registered, see triggerEvent API on how to raise events
```

Returns **[boolean][4]** 

## isExistsEventHandler

Returns true is an EventHandler of the given name exists.

Type: [function][1]

### Parameters

*   `handlerName` **[string][2]** 

Returns **[boolean][4]** 

## triggerEvent

Triggers an event on the named event handler.

Type: [function][1]

### Parameters

*   `handlerName` **[string][2]** 
*   `eventName`  the event name as recognised by the handler. this is usually a string.
*   `eventParams` **...any** Can be a comma seperated list of args or a single argument.

### Examples

To trigger an event to the `closeDialogue` event handler registered above

```javascript
// anywhere in code, do the following:
const EventManager = brackets.getModule("utils/EventManager");
EventManager.triggerEvent("closeDialogueHandler", "someEvent", "param1", "param2", ...);
```

## onmessage

This function acts as an event handler for all 'message' events targeted at the window object.
This is useful if you have to send/receive messaged from an embedded cross-domain iframe inside phoenix.
[https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage][5]
Instead of directly overriding window.onmessage, extensions or other elements that need to
listen to these events should register their named eventHandler with `EventManager`.

### Parameters

*   `event` **[MessageEvent][6]** The 'message' event targeted at the window object. The event's
    'data' property should have a 'handlerName' and `eventName` property that will be triggered in phcode.

### Examples

```javascript
// We will try to communicate within an embedded iframe and an extension

// In your extension in phoenix, register a handlerName to process a new kind of event.
const EventDispatcher = brackets.getModule("utils/EventDispatcher"),
EventDispatcher.makeEventDispatcher(exports);
const EventManager = brackets.getModule("utils/EventManager");
// Note: for event handler names, please change the <extensionName> to your extension name
// to prevent collisions. EventHandlers starting with `ph-` and `br-` are reserved as system handlers
// and not available for use in extensions.
EventManager.registerEventHandler("<extensionName>-iframeMessageHandler", exports);
exports.on("iframeHelloEvent", function(_ev, event){
   console.log(event.data.message);
});

// Now from your iframe, send a message to the above event handler using:
window.top.postMessage({
    handlerName: "<extensionName>-iframeMessageHandler",
    eventName: "iframeHelloEvent",
    message: "hello world"
}, '*');
```

[1]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[2]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[3]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[4]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[5]: https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage

[6]: https://developer.mozilla.org/docs/Web/API/MessageEvent
