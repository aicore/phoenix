<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## features/QuickViewManager

QuickViewManager provides support to add interactive preview popups on hover over the main editors.
Extensions can register to provide previews with `QuickViewManager.registerQuickViewProvider` API.
![quick-view-image.png][1]
![quick-view-youtube.png][2]

### See Related: SelectionViewManager

[features/SelectionViewManager][3] is similar to
QuickViewManager API.

*   SelectionViews popup only once user selects a text by mouse or hover over a region with text selection.
*   Quickviews popup on mouse hover.

![image][4]

## Usage

Lets build a "hello world" extension that displays "hello world" on hover over a text in the editor.
In your extension file, add the following code:

```js
const QuickViewManager = brackets.getModule("features/QuickViewManager");
// replace `all` with language ID(Eg. javascript) if you want to restrict the preview to js files only.
QuickViewManager.registerQuickViewProvider(exports, ["all"]);

// now implement the getQuickView function that will be invoked when ever user hovers over a text in the editor.
exports.getQuickView = function(editor, pos, token, line) {
        return new Promise((resolve, reject)=>{
            resolve({
                start: {line: pos.line, ch:token.start},
                end: {line: pos.line, ch:token.end},
                content: "<div>hello world</div>"
            });
        });
    };
```

### How it works

When QuickViewManager determines that the user intents to see QuickView on hover, `getQuickView` function on all
registered QuickView providers are invoked to get the quick view popup. `getQuickView` should return a promise
that resolves to the popup contents if the provider has a quick view. Else just reject the promise. If multiple
providers returns QuickView, all of them are displayed one by one. See detailed API docs for implementation
details below:

## API

### registerQuickViewProvider

Register a QuickView provider with this api.

```js
// syntax
QuickViewManager.registerQuickViewProvider(provider, supportedLanguages);
```

The API requires two parameters:

1.  `provider`: must implement a  `getQuickView` function which will be invoked to get the preview. See API doc below.
2.  `supportedLanguages`: An array of languages that the QuickView supports. If `["all"]` is supplied, then the
    QuickView will be invoked for all languages. Restrict to specific languages: Eg: `["javascript", "html", "php"]`

```js
// to register a provider that will be invoked for all languages. where provider is any object that implements
// a getQuickView function
QuickViewManager.registerQuickViewProvider(provider, ["all"]);

// to register a provider that will be invoked for specific languages
QuickViewManager.registerQuickViewProvider(provider, ["javascript", "html", "php"]);
```

### removeQuickViewProvider

Removes a registered code hint provider. The API takes the same arguments as `registerQuickViewProvider`.

```js
// syntax
QuickViewManager.removeQuickViewProvider(provider, supportedLanguages);
// Example
QuickViewManager.removeQuickViewProvider(provider, ["javascript", "html"]);
```

### getQuickView

Each provider must implement the `getQuickView` function that returns a promise. The promise either resolves with
the quick view details object(described below) or rejects if there is no preview for the position.

```js
// function signature
provider.getQuickView = function(editor, pos, token, line) {
        return new Promise((resolve, reject)=>{
            resolve({
                start: {line: pos.line, ch:token.start},
                end: {line: pos.line, ch:token.end},
                content: "<div>hello world</div>"
            });
        });
    };
```

#### parameters

The function will be called with the following arguments:

1.  `editor` - The editor over which the user hovers the mouse cursor.
2.  `pos` - the cursor position over which the user hovers.
3.  `token` - hovered token details
4.  `line` - the full line text as string.

#### return types

The promise returned should resolve to an object with the following contents:

1.  `start` : Indicates the start cursor position from which the quick view is valid.
2.  `end` : Indicates the end cursor position to which the quick view is valid. These are generally used to highlight
    the hovered section of the text in the editor.
3.  `content`: Either `HTML` as text, a `DOM Node` or a `Jquery Element`.

#### Modifying the QuickView content after resolving `getQuickView` promise

Some advanced/interactive extensions may need to do dom operations on the quick view content.
In such cases, it is advised to return a domNode/Jquery element as content in `getQuickView`. Event Handlers
or further dom manipulations can be done on the returned content element.
The Quick view may be dismissed at any time, so be sure to check if the DOM Node is visible in the editor before
performing any operations.

#### Considerations

1.  QuickView won't be displayed till all provider promises are settled. To improve performance, if your QuickView
    handler takes time to resolve the QuickView, resolve a dummy quick once you are sure that a QuickView needs
    to be shown to the user. The div contents can be later updated as and when more details are available.
2.  Note that the QuickView could be hidden/removed any time by the QuickViewManager.
3.  If multiple providers returns a valid popup, all of them are displayed.

## isQuickViewShown

If quickview is displayed and visible on screen

Type: [function][5]

Returns **[boolean][6]** 

[1]: generatedDocs/images/quick-view-image.png

[2]: generatedDocs/images/quick-view-youtube.png

[3]: https://github.com/phcode-dev/phoenix/wiki/SelectionViewManager-API

[4]: https://user-images.githubusercontent.com/5336369/186434397-3db55789-6077-4d02-b4e2-78ef3f663399.png

[5]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[6]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean
